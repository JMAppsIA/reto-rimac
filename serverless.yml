service: retorimac
frameworkVersion: '2'

provider:
  name: aws
  runtime: nodejs12.x
  lambdaHashingVersion: 20201221
  profile: serverless-admin
  #region: us-east-2
  region: ${self:custom.regionName.${self:provider.stage}}
  stage: ${opt:stage,'TEST'}
  apiGateway:
    shouldStartNameWithService: true

  #Environment Variables  
  environment: ${file(configuration/serverless/variables.yml)}  

# Custom Variables
custom:  
  regionName:
    TEST: us-east-2 
    us-east-2: UEAST2
  dynamoTableName: ${ssm:/reto-rimac/test/dynamo-table-name}

plugins:
  - serverless-offline

package:
  excludeDevDependencies: true
  include:
  - node_modules/**

functions: ${file(configuration/serverless/functions.yml)} 
         
